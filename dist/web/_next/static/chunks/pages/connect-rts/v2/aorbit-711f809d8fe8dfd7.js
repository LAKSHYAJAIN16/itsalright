(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{748:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/connect-rts/v2/aorbit",function(){return a(5672)}])},5631:function(e,n,a){"use strict";a.d(n,{Z:function(){return i}});var t=a(5893),s=a(5988),r=a(7294);function i(){var e=(0,r.useState)(void 0),n=e[0],a=e[1],i=(0,r.useState)(!1),c=i[0],o=i[1],d=(0,r.useState)(void 0),l=d[0],x=d[1];return(0,r.useEffect)((function(){var e,n;a(JSON.parse(localStorage.getItem("logged"))||!1),x(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.profilePic),o(null===(n=JSON.parse(localStorage.getItem("user")))||void 0===n?void 0:n.isExpert)}),[]),(0,t.jsx)(t.Fragment,{children:void 0!==n&&(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsxs)("div",{className:"jsx-6a8cae305e7171bd main",children:[(0,t.jsx)("a",{href:"/home",className:"jsx-6a8cae305e7171bd",children:(0,t.jsxs)("p",{className:"jsx-6a8cae305e7171bd logoText",children:["itsalright ",c&&(0,t.jsx)("span",{className:"jsx-6a8cae305e7171bd expert",children:"Expert"})]})}),c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{href:"/browse",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{style:{zoom:.93},className:"jsx-6a8cae305e7171bd navOption",children:"Answer"})}),(0,t.jsx)("a",{href:"/connect-rts/sta/expert",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{style:{zoom:.93},className:"jsx-6a8cae305e7171bd navOption",children:"Connect"})}),(0,t.jsx)("a",{href:"/expert/messages",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{style:{zoom:.93},className:"jsx-6a8cae305e7171bd navOption",children:"Messages"})}),(0,t.jsx)("a",{href:"/expert/leaderboard",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{style:{zoom:.93},className:"jsx-6a8cae305e7171bd navOption",children:"Leaderboard"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{href:"/browse",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{className:"jsx-6a8cae305e7171bd navOption",children:"Browse"})}),(0,t.jsx)("a",{href:"/share",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{className:"jsx-6a8cae305e7171bd navOption",children:"Share"})}),(0,t.jsx)("a",{href:"/connect-rts/sta/user",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{className:"jsx-6a8cae305e7171bd navOption",children:"Connect"})}),(0,t.jsx)("a",{href:"/contact",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("p",{className:"jsx-6a8cae305e7171bd navOption",children:"Contact"})})]}),n?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("a",{href:"/user-settings",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("img",{src:l,className:"jsx-6a8cae305e7171bd profilePic"})})}):(0,t.jsx)("a",{href:"/login",className:"jsx-6a8cae305e7171bd",children:(0,t.jsx)("button",{style:{marginLeft:"20px"},className:"jsx-6a8cae305e7171bd standardButton",children:"Login"})})]}),(0,t.jsx)(s.default,{id:"6a8cae305e7171bd",children:".main.jsx-6a8cae305e7171bd {display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\n-webkit-flex-direction:row;\n-ms-flex-direction:row;\nflex-direction:row;\n-webkit-align-items:center;\n-webkit-box-align:center;\n-ms-flex-align:center;\nalign-items:center;\nmargin-top:2px}\n.logoText.jsx-6a8cae305e7171bd {font-weight:500;\nfont-family:var(--logofont);\nfont-size:2.4em;\nmargin-left:100px;\nmargin-right:180px;\ncolor:black}\n.navOption.jsx-6a8cae305e7171bd {color:darkgray;\nfont-size:1.2em;\nfont-weight:300;\nfont-family:var(--mainfont);\nmargin-right:80px;\ncursor:pointer;\n-webkit-transition:all 500ms ease;\ntransition:all 500ms ease}\n.navOption.jsx-6a8cae305e7171bd:hover {color:black}\n.profilePic.jsx-6a8cae305e7171bd {height:65px;\nwidth:65px;\nborder-radius:50%;\nmargin-left:160px;\ncursor:pointer}\n.expert.jsx-6a8cae305e7171bd {font-family:var(--royalfont);\nfont-size:0.6em;\nfont-weight:400;\ncolor:var(--royalcolor)}"})]})})}},9170:function(e,n,a){"use strict";a.d(n,{Z:function(){return r}});var t=a(5893),s=a(5988);a(7294);function r(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"jsx-34df85e1b41d6f74 dotcontainer",children:[(0,t.jsx)("span",{className:"jsx-34df85e1b41d6f74 first dot",children:"."}),(0,t.jsx)("span",{className:"jsx-34df85e1b41d6f74 second dot",children:"."}),(0,t.jsx)("span",{className:"jsx-34df85e1b41d6f74 third dot",children:"."})]}),(0,t.jsx)(s.default,{id:"34df85e1b41d6f74",children:".dot.jsx-34df85e1b41d6f74 {font-family:var(--mainfont);\nfont-size:4em;\ntext-align:center;\nmargin-left:10px;\n-webkit-animation:anim 3s ease-in-out infinite;\nanimation:anim 3s ease-in-out infinite}\n.dotcontainer.jsx-34df85e1b41d6f74 {display:-webkit-box;\ndisplay:-webkit-flex;\ndisplay:-ms-flexbox;\ndisplay:flex;\n-webkit-justify-content:center;\njustify-content:center}\n.first.jsx-34df85e1b41d6f74 {animation-delay:0.1s}\n.second.jsx-34df85e1b41d6f74 {animation-delay:0.3s}\n.third.jsx-34df85e1b41d6f74 {animation-delay:0.5s}\n@keyframes anim {20% {transform:translateY(0px)}50% {transform:translateY(-100px)}100% {transform:translateY(0px)}}"})]})}},3925:function(e,n,a){"use strict";a.d(n,{db:function(){return c},u:function(){return o}});var t=a(5503),s=a(6257),r=a(7702),i=(0,t.ZF)({apiKey:"AIzaSyDLlpqRWjsd8WkBq9Y-A-tlQfIXwE_Wh60",authDomain:"itsalright-e6062.firebaseapp.com",projectId:"itsalright-e6062",storageBucket:"itsalright-e6062.appspot.com",messagingSenderId:"451606941252",appId:"1:451606941252:web:fae20fb51769229e683611",measurementId:"G-4421CQ6M2N"}),c=(0,s.ad)(i),o=(0,r.v0)(i)},34:function(e,n,a){"use strict";function t(e){for(var n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=a.length,s=0;s<e;s++)n+=a.charAt(Math.floor(Math.random()*t));return n}a.d(n,{Z:function(){return t}})},5672:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return h}});var t=a(5666),s=a.n(t),r=a(5893),i=a(7294),c=a(6257),o=a(2432),d=a.n(o),l=a(3925),x=a(34),f=a(9170),u=a(5631);function m(e,n,a,t,s,r,i){try{var c=e[r](i),o=c.value}catch(d){return void a(d)}c.done?n(o):Promise.resolve(o).then(t,s)}function p(e){return function(){var n=this,a=arguments;return new Promise((function(t,s){var r=e.apply(n,a);function i(e){m(r,t,s,i,c,"next",e)}function c(e){m(r,t,s,i,c,"throw",e)}i(void 0)}))}}function h(){var e=(0,i.useRef)(),n=(0,i.useRef)(),a=(0,i.useState)(!1),t=a[0],o=a[1],m=(0,i.useState)(0),h=m[0],b=m[1];(0,i.useEffect)((function(){p(s().mark((function a(){var t,r,i,d,f,u,m,j,v,g,w;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=new URL(window.location).searchParams,r=t.get("v"),i=t.get("b"),d=new RTCPeerConnection({iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun1.2.google.com:19302"]}]}),a.next=7,window.navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 7:return f=a.sent,e.current.srcObject=f,e.current.play(),f.getTracks().forEach((function(e){d.addTrack(e,f)})),(0,c.cf)((0,c.JU)(l.db,"calls",r),p(s().mark((function e(n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.metadata.hasPendingWrites?"Local":"Server",!n.exists()){e.next=10;break}if("Server"!==a){e.next=10;break}if("ended"!==n.data().proxy){e.next=10;break}return b(1),e.next=8,(0,c.oe)((0,c.JU)(l.db,"available-calls",r));case 8:return e.next=10,(0,c.oe)((0,c.JU)(l.db,"calls",r));case 10:case"end":return e.stop()}}),e)})))),window.onbeforeunload=function(){var e=p(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==h){e.next=7;break}return e.next=3,(0,c.r7)((0,c.JU)(l.db,"calls",r),{proxy:"ended"});case 3:return e.next=5,(0,c.oe)((0,c.JU)(l.db,"available-calls",r));case 5:return e.next=7,(0,c.oe)((0,c.JU)(l.db,"calls",r));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.next=15,(0,c.QT)((0,c.JU)(l.db,"calls",r));case 15:return u=a.sent,a.next=18,(0,c.PL)((0,c.hJ)(l.db,"calls",r,"callCandidates"));case 18:return m=a.sent,d.setRemoteDescription(new RTCSessionDescription(u.data().callSDP)),j=[],m.docs.forEach((function(e){j.push(e.data()),d.addIceCandidate(new RTCIceCandidate(e.data()))})),v=new MediaStream,d.ontrack=function(e){o(!0),e.streams[0].getTracks().forEach((function(e){v.addTrack(e),n.current.srcObject=v,n.current.play()}))},g=[],d.onicecandidate=p(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.candidate&&console.log("so?"),n.candidate&&g.push(n.candidate),!n.candidate){e.next=6;break}if("false"===i){e.next=6;break}return e.next=6,(0,c.pl)((0,c.JU)(l.db,"calls",r,"answerCandidates",(0,x.Z)(10)),n.candidate.toJSON());case 6:case"end":return e.stop()}}),e)}))),a.next=28,d.createAnswer();case 28:return w=a.sent,a.next=31,d.setLocalDescription(w);case 31:return a.next=33,(0,c.r7)((0,c.JU)(l.db,"calls",r),{answerSDP:{sdp:w.sdp,type:w.type}});case 33:console.log(u.data()),console.log(j);case 35:case"end":return a.stop()}}),a)})))()}),[]);var j=p(s().mark((function e(){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(window.location).searchParams,a=n.get("v"),e.next=4,(0,c.r7)((0,c.JU)(l.db,"calls",a),{proxy:"ended"});case 4:return e.next=6,(0,c.oe)((0,c.JU)(l.db,"available-calls",a));case 6:return e.next=8,(0,c.oe)((0,c.JU)(l.db,"calls",a));case 8:b(1);case 9:case"end":return e.stop()}}),e)})));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{}),0===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:d().vids,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("video",{muted:!0,ref:e,className:d().vid}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"You"})]}),!0===t&&(0,r.jsxs)("div",{children:[(0,r.jsx)("video",{ref:n,className:d().vid}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"Expert"})]})]}),(0,r.jsx)("br",{}),!1===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"Waiting for Expert"})]}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)("button",{className:"standardButton",onClick:function(){return j()},children:"End Call"})})]}),1===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"Video Call Ended bub"}),(0,r.jsx)("a",{href:"/home",children:"Go to homepage lol"})]})]})}},2432:function(e){e.exports={vids:"Connect_vids__p4IX_",vid:"Connect_vid__V9dlR"}}},function(e){e.O(0,[16,297,452,774,888,179],(function(){return n=748,e(e.s=n);var n}));var n=e.O();_N_E=n}]);